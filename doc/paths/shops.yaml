/shops:
  get:
    summary: ショップの一覧を返すAPI
    description: ショップの一覧を返します
    operationId: getShopsList
    tags:
      - Shops
    security: []
    responses:
      "200":
        description: 正常
        content:
          application/json:
            schema:
              $ref: "../components/schemas/responses.yaml#/ShopListResponse"
            example:
              data:
                - id: 1
                  name: "Switch"
                  station_name: "武蔵小金井駅"
                  address: "東京都小金井市本町5-18-15"
                  tel: "042-201-1478"
                  memo: "美味しいワインバルです"
                  review: 5
                  is_instagram: true
                  is_ai_generated: true
                  created_at: "2024-01-15T10:00:00Z"
              success: true
      "400":
        description: リクエストエラー
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: "投稿が見つかりませんでした。"
              success: false
      "500":
        description: サーバーエラー
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: Internal server error
              success: false

  post:
    summary: 新しいショップを登録するAPI
    description: |
      新しいショップの情報を登録します。
      このAPIは、以下の**いずれか**の形式のリクエストボディを受け付けます。
      1. **手動入力パターン**: ショップの基本情報（`name`, `address` など）を手動で入力する場合。
      2. **自動入力パターン**: 外部サービス（例: Instagram）から情報を自動取得する場合。この場合、リクエストボディには`is_instagram`のみを含みます。
    operationId: CreateNewShop
    tags:
      - Shops
    security: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            oneOf:
              - $ref: "../components/schemas/create.yaml#/ManualCreate"
              - $ref: "../components/schemas/create.yaml#/AutoCreate"
            discriminator:
              propertyName: is_instagram
          examples:
            manualInputExample:
              summary: 手動入力の例
              value:
                name: "Switch"
                url: "https://www.instagram.com/"
                station_name: "武蔵小金井駅"
                address: "東京都小金井市本町5-18-15"
                tel: "042-201-1478"
                memo: "美味しいワインバルです"
                review: 5
                is_instagram: true
                is_ai_generated: false
            autoInputExample:
              summary: 自動入力の例 (Instagramから情報取得)
              value:
                is_instagram: true
                is_ai_generated: true
    responses:
      "201":
        description: 新規ショップの作成に成功した場合
        content:
          application/json:
            schema:
              $ref: "../components/schemas/responses.yaml#/ShopResponse"
            example:
              success: true

      "400":
        description: リクエストデータのバリデーションエラーが発生した場合
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ValidationErrorResponse"
            example:
              errors:
                - "ショップ名は必須です"
                - "AI生成フラグは必須です"
                - "Instagramフラグは必須です"
              success: false

      "500":
        description: サーバーエラー
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: Internal server error
              success: false

/shops/{id}:
  get:
    summary: ショップの詳細取得
    description: 指定されたIDのショップ情報を取得します
    operationId: getShop
    tags:
      - Shops
    security: []
    parameters:
      - name: id
        in: path
        required: true
        description: ショップID
        schema:
          type: integer
          example: 1
    responses:
      "200":
        description: 正常
        content:
          application/json:
            schema:
              $ref: "../components/schemas/responses.yaml#/ShopResponse"
            example:
              data:
                id: 1
                name: "Switch"
                station_name: "武蔵小金井駅"
                address: "東京都小金井市本町5-18-15"
                tel: "042-201-1478"
                memo: "美味しいワインバルです"
                review: 5
                is_instagram: true
              success: true
      "400":
        description: リクエストエラー
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: Bad request
      "404":
        description: ショップが見つからない場合
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: shop not found
      "500":
        description: サーバーエラー
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: Internal server error

  delete:
    summary: ショップの削除
    description: 指定されたIDのShopを削除します
    operationId: deleteShop
    tags:
      - Shops
    security: []
    parameters:
      - name: id
        in: path
        required: true
        description: deleteShop ID
        schema:
          type: integer
          example: 1
    responses:
      "200":
        description: 削除成功
        content:
          application/json:
            schema:
              $ref: "../components/schemas/responses.yaml#/DeleteSuccessResponse"
            example:
              success: true
      "404":
        description: ショップが見つからない場合
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: ショップが見つかりません
              success: false
      "500":
        description: サーバーエラー
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorResponse"
            example:
              error: サーバーでエラーが発生しました
              success: false
